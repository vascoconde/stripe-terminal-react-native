var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.requestNeededAndroidPermissions=requestNeededAndroidPermissions;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _reactNative=require("react-native");var defaultFineLocationParams={title:'Location Permission',message:'Stripe Terminal needs access to your location',buttonPositive:'Accept'};var isAndroid12orHigher=function isAndroid12orHigher(){return _reactNative.Platform.OS==='android'&&_reactNative.Platform.Version>=31;};function requestNeededAndroidPermissions(){var _ref,_ref$accessFineLocati,accessFineLocation,grantedFineLocation,grantedBT,grantedBTScan,_args=arguments;return _regenerator.default.async(function requestNeededAndroidPermissions$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref=_args.length>0&&_args[0]!==undefined?_args[0]:{},_ref$accessFineLocati=_ref.accessFineLocation,accessFineLocation=_ref$accessFineLocati===void 0?defaultFineLocationParams:_ref$accessFineLocati;_context.next=3;return _regenerator.default.awrap(_reactNative.PermissionsAndroid.request(_reactNative.PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,accessFineLocation||defaultFineLocationParams));case 3:grantedFineLocation=_context.sent;if(hasGrantedPermission(grantedFineLocation)){_context.next=6;break;}return _context.abrupt("return",{error:(0,_defineProperty2.default)({},_reactNative.PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,grantedFineLocation)});case 6:if(isAndroid12orHigher()){_context.next=8;break;}return _context.abrupt("return",{error:null});case 8:_context.next=10;return _regenerator.default.awrap(_reactNative.PermissionsAndroid.request(_reactNative.PermissionsAndroid.PERMISSIONS.BLUETOOTH_CONNECT));case 10:grantedBT=_context.sent;if(hasGrantedPermission(grantedBT)){_context.next=13;break;}return _context.abrupt("return",{error:(0,_defineProperty2.default)({},_reactNative.PermissionsAndroid.PERMISSIONS.BLUETOOTH_CONNECT,grantedBT)});case 13:_context.next=15;return _regenerator.default.awrap(_reactNative.PermissionsAndroid.request(_reactNative.PermissionsAndroid.PERMISSIONS.BLUETOOTH_SCAN));case 15:grantedBTScan=_context.sent;if(hasGrantedPermission(grantedBTScan)){_context.next=18;break;}return _context.abrupt("return",{error:(0,_defineProperty2.default)({},_reactNative.PermissionsAndroid.PERMISSIONS.BLUETOOTH_SCAN,grantedBTScan)});case 18:return _context.abrupt("return",{error:null});case 19:case"end":return _context.stop();}}},null,null,null,Promise);}var hasGrantedPermission=function hasGrantedPermission(status){return status===_reactNative.PermissionsAndroid.RESULTS.GRANTED;};
//# sourceMappingURL=androidPermissionsUtils.js.map