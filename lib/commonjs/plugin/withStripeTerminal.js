Object.defineProperty(exports,"__esModule",{value:true});exports.addBTPermissionToManifest=addBTPermissionToManifest;exports.addLocationPermissionToManifest=addLocationPermissionToManifest;exports.withNoopSwiftFile=exports.default=void 0;var _configPlugins=require("@expo/config-plugins");var pkg=require('@stripe/stripe-terminal-react-native/package.json');var withStripeTerminal=function withStripeTerminal(config,props){config=withStripeTerminalIos(config,props);config=withNoopSwiftFile(config);config=withStripeTerminalAndroid(config);return config;};var withStripeTerminalAndroid=function withStripeTerminalAndroid(expoConfig){return(0,_configPlugins.withAndroidManifest)(expoConfig,function(config){config.modResults=addBTPermissionToManifest(config.modResults);config.modResults=addLocationPermissionToManifest(config.modResults);return config;});};function addLocationPermissionToManifest(androidManifest){if(!Array.isArray(androidManifest.manifest['uses-permission'])){androidManifest.manifest['uses-permission']=[];}if(!androidManifest.manifest['uses-permission'].find(function(item){return item.$['android:name']==='android.permission.ACCESS_FINE_LOCATION';})){var _androidManifest$mani;(_androidManifest$mani=androidManifest.manifest['uses-permission'])==null?void 0:_androidManifest$mani.push({$:{'android:name':'android.permission.ACCESS_FINE_LOCATION'}});}if(!androidManifest.manifest['uses-permission'].find(function(item){return item.$['android:name']==='android.permission.ACCESS_COARSE_LOCATION';})){var _androidManifest$mani2;(_androidManifest$mani2=androidManifest.manifest['uses-permission'])==null?void 0:_androidManifest$mani2.push({$:{'android:name':'android.permission.ACCESS_COARSE_LOCATION'}});}return androidManifest;}function addBTPermissionToManifest(androidManifest){if(!Array.isArray(androidManifest.manifest['uses-permission'])){androidManifest.manifest['uses-permission']=[];}if(!androidManifest.manifest['uses-permission'].find(function(item){return item.$['android:name']==='android.permission.BLUETOOTH_CONNECT';})){var _androidManifest$mani3;(_androidManifest$mani3=androidManifest.manifest['uses-permission'])==null?void 0:_androidManifest$mani3.push({$:{'android:name':'android.permission.BLUETOOTH_CONNECT'}});}if(!androidManifest.manifest['uses-permission'].find(function(item){return item.$['android:name']==='android.permission.BLUETOOTH_SCAN';})){var _androidManifest$mani4;(_androidManifest$mani4=androidManifest.manifest['uses-permission'])==null?void 0:_androidManifest$mani4.push({$:{'android:name':'android.permission.BLUETOOTH_SCAN'}});}return androidManifest;}var withStripeTerminalIos=function withStripeTerminalIos(expoConfig,props){return(0,_configPlugins.withInfoPlist)(expoConfig,function(config){if(props.bluetoothBackgroundMode){config.modResults.UIBackgroundModes=['bluetooth-central'];}config.modResults.NSLocationWhenInUseUsageDescription=props.locationWhenInUsePermission||'Location access is required in order to accept payments.';config.modResults.NSBluetoothPeripheralUsageDescription=props.bluetoothPeripheralPermission||'Bluetooth access is required in order to connect to supported bluetooth card readers.';config.modResults.NSBluetoothAlwaysUsageDescription=props.bluetoothAlwaysUsagePermission||'This app uses Bluetooth to connect to supported card readers.';return config;});};var withNoopSwiftFile=function withNoopSwiftFile(config){return _configPlugins.IOSConfig.XcodeProjectFile.withBuildSourceFile(config,{filePath:'noop-file.swift',contents:['//','// @generated','// A blank Swift file must be created for native modules with Swift files to work correctly.','//',''].join('\n')});};exports.withNoopSwiftFile=withNoopSwiftFile;var _default=(0,_configPlugins.createRunOncePlugin)(withStripeTerminal,pkg.name,pkg.version);exports.default=_default;
//# sourceMappingURL=withStripeTerminal.js.map